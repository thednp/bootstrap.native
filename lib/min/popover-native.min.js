// Native Javascript for Bootstrap 3 | Popover
// by dnp_theme
!function(t){"undefined"!=typeof module&&"object"==typeof exports?module.exports="undefined"!=typeof window?t():t:window.Popover=t()}(function(){var t=function(t,e){e=e||{},this.link="object"==typeof t?t:document.querySelector(t),this.title=this.link.getAttribute("data-title")||null,this.content=this.link.getAttribute("data-content")||null,this.popover=null,this.options={},this.options.template=e.template?e.template:null,this.options.trigger=e.trigger?e.trigger:"hover",this.options.animation=e.animation&&"true"!==e.animation?e.animation:"true",this.options.placement=e.placement?e.placement:"top",this.options.delay=parseInt(e.delay)||100,this.options.dismiss=e.dismiss&&"true"===e.dismiss?!0:!1,this.duration=150,this.options.duration=/ie/.test(document.documentElement.className)?0:e.duration||this.duration,this.options.container=document.body,(this.content||this.options.template)&&this.init(),this.timer=0,this.rect=null};t.prototype={init:function(){this.actions(),"hover"===this.options.trigger?(this.link.addEventListener("mouseenter",this.open,!1),this.options.dismiss||this.link.addEventListener("mouseleave",this.close,!1)):"click"===this.options.trigger?(this.link.addEventListener("click",this.toggle,!1),this.options.dismiss||this.link.addEventListener("blur",this.close,!1)):"focus"===this.options.trigger&&(this.link.addEventListener("focus",this.toggle,!1),this.options.dismiss||this.link.addEventListener("blur",this.close,!1)),this.options.dismiss&&document.addEventListener("click",this.dismiss,!1),/ie/.test(document.documentElement.className)||"focus"!==this.options.trigger&&"click"!==this.options.trigger||window.addEventListener("resize",this.close,!1)},actions:function(){var t=this;this.toggle=function(){null===t.popover?t.open():t.close()},this.open=function(){clearTimeout(t.link.getAttribute("data-timer")),t.timer=setTimeout(function(){null===t.popover&&(t.createPopover(),t.stylePopover(),t.updatePopover())},t.options.duration),t.link.setAttribute("data-timer",t.timer)},this.dismiss=function(e){t.popover&&e.target===t.popover.querySelector(".close")&&t.close()},this.close=function(){clearTimeout(t.link.getAttribute("data-timer")),t.timer=setTimeout(function(){t.popover&&null!==t.popover&&/in/.test(t.popover.className)&&(t.popover.className=t.popover.className.replace(" in",""),setTimeout(function(){t.removePopover()},t.options.duration))},t.options.delay+t.options.duration),t.link.setAttribute("data-timer",t.timer)},this.removePopover=function(){this.popover&&this.options.container.removeChild(this.popover),this.popover=null,this.timer=null},this.createPopover=function(){if(this.popover=document.createElement("div"),null!==this.content&&null===this.options.template){this.popover.setAttribute("role","tooltip");var t=document.createElement("div");if(t.setAttribute("class","arrow"),null!==this.title){var e=document.createElement("h3");e.setAttribute("class","popover-title"),e.innerHTML=this.options.dismiss?this.title+'<button type="button" class="close">×</button>':this.title,this.popover.appendChild(e)}var i=document.createElement("div");i.setAttribute("class","popover-content"),this.popover.appendChild(t),this.popover.appendChild(i),i.innerHTML=this.options.dismiss&&null===this.title?this.content+'<button type="button" class="close">×</button>':this.content}else{var o=document.createElement("div");o.innerHTML=this.options.template,this.popover.innerHTML=o.firstChild.innerHTML}this.options.container.appendChild(this.popover),this.popover.style.display="block"},this.stylePopover=function(t){this.rect=this.getRect();var e=t||this.options.placement,i="true"===this.options.animation?"fade":"";this.popover.setAttribute("class","popover "+e+" "+i);var o={w:this.link.offsetWidth,h:this.link.offsetHeight},s=this.popoverDimensions(this.popover),n={w:s.w,h:s.h},r=this.getScroll().y,p=this.getScroll().x;/top/.test(e)?(this.popover.style.top=this.rect.top+r-n.h+"px",this.popover.style.left=this.rect.left+p-n.w/2+o.w/2+"px"):/bottom/.test(e)?(this.popover.style.top=this.rect.top+r+o.h+"px",this.popover.style.left=this.rect.left+p-n.w/2+o.w/2+"px"):/left/.test(e)?(this.popover.style.top=this.rect.top+r-n.h/2+o.h/2+"px",this.popover.style.left=this.rect.left+p-n.w+"px"):/right/.test(e)&&(this.popover.style.top=this.rect.top+r-n.h/2+o.h/2+"px",this.popover.style.left=this.rect.left+p+o.w+"px")},this.updatePopover=function(){var e=null;e=t.isElementInViewport(t.popover)?t.options.placement:t.updatePlacement(),t.stylePopover(e),t.popover.className+=" in"},this.updatePlacement=function(){var t=this.options.placement;return/top/.test(t)?"bottom":/bottom/.test(t)?"top":/left/.test(t)?"right":/right/.test(t)?"left":void 0},this.getRect=function(){return this.link.getBoundingClientRect()},this.getScroll=function(){return{y:window.pageYOffset||document.documentElement.scrollTop,x:window.pageXOffset||document.documentElement.scrollLeft}},this.popoverDimensions=function(t){return{w:t.offsetWidth,h:t.offsetHeight}},this.isElementInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}}};var e=document.querySelectorAll("[data-toggle=popover]"),i=0,o=e.length;for(i;o>i;i++){var s=e[i],n={};n.trigger=s.getAttribute("data-trigger"),n.animation=s.getAttribute("data-animation"),n.duration=s.getAttribute("data-duration"),n.placement=s.getAttribute("data-placement"),n.dismiss=s.getAttribute("data-dismiss"),n.delay=s.getAttribute("data-delay"),new t(s,n)}return t});