"use strict";const e=require("./base-component-_c7CmBvl.js"),E=require("./dataBsDismiss-CMHF7If_.js"),D=require("./dataBsToggle-Dj-Ng54N.js"),c=require("./showClass-D_Ms1FgG.js"),r=require("./popupContainer-Dxpyo8Ll.js"),a=require("./isVisible-BBb0IrW-.js"),C=require("./getTargetElement-BZ3GCU7c.js"),$=require("./isDisabled-BI_fUUV9.js"),_=`.${r.offcanvasString}`,O=`[${D.dataBsToggle}="${r.offcanvasString}"]`,k=`[${E.dataBsDismiss}="${r.offcanvasString}"]`,d=`${r.offcanvasString}-toggling`,q={backdrop:!0,keyboard:!0,scroll:!1},f=o=>e.to(o,a.offcanvasComponent),Z=o=>new S(o),v=e.mo(`show.bs.${r.offcanvasString}`),T=e.mo(`shown.bs.${r.offcanvasString}`),u=e.mo(`hide.bs.${r.offcanvasString}`),w=e.mo(`hidden.bs.${r.offcanvasString}`),A=o=>{const{element:t}=o,{clientHeight:s,scrollHeight:n}=e.w(t);a.setScrollbar(t,s!==n)},y=(o,t)=>{const s=t?e.E:e.r,n=e.d(o.element);s(n,e.ft,K),s(n,e.vt,P)},b=o=>{const{element:t,options:s}=o;s.scroll||(A(o),e.Eo(e.So(t),{overflow:"hidden"})),e.Gn(t,d),e.Gn(t,c.showClass),e.Eo(t,{visibility:"visible"}),e.so(t,()=>G(o))},H=o=>{const{element:t,options:s}=o,n=a.getCurrentOpen(t);t.blur(),!n&&s.backdrop&&e._n(a.overlay,c.showClass)&&a.hideOverlay(),e.so(t,()=>I(o))};function B(o){const t=C.getTargetElement(this),s=t&&f(t);$.isDisabled(this)||s&&(s.relatedTarget=this,s.toggle(),this.tagName==="A"&&o.preventDefault())}const P=o=>{const{target:t}=o,s=e.Wo(a.offcanvasActiveSelector,e.d(t));if(!s)return;const n=e.Wo(k,s),i=f(s);if(!i)return;const{options:l,triggers:g}=i,{backdrop:m}=l,h=e.Ne(t,O),p=e.d(s).getSelection();a.overlay.contains(t)&&m==="static"||(!(p&&p.toString().length)&&(!s.contains(t)&&m&&(!h||g.includes(t))||n&&n.contains(t))&&(i.relatedTarget=n&&n.contains(t)?n:void 0,i.hide()),h&&h.tagName==="A"&&o.preventDefault())},K=({code:o,target:t})=>{const s=e.Wo(a.offcanvasActiveSelector,e.d(t)),n=s&&f(s);n&&n.options.keyboard&&o===e.gn&&(n.relatedTarget=void 0,n.hide())},G=o=>{const{element:t}=o;e.Zn(t,d),e.Kn(t,e.X),e.Qn(t,e.Pe,"true"),e.Qn(t,"role","dialog"),e.Z(t,T),y(o,!0),e.ao(t),e.Ao(t)},I=o=>{const{element:t,triggers:s}=o;e.Qn(t,e.X,"true"),e.Kn(t,e.Pe),e.Kn(t,"role"),e.Eo(t,{visibility:""});const n=v.relatedTarget||s.find(a.isVisible);n&&e.ao(n),a.removeOverlay(t),e.Z(t,w),e.Zn(t,d),e.Ao(t),a.getCurrentOpen(t)||y(o)};class S extends e.BaseComponent{static selector=_;static init=Z;static getInstance=f;constructor(t,s){super(t,s);const{element:n}=this;this.triggers=[...e.de(O,e.d(n))].filter(i=>C.getTargetElement(i)===n),this.relatedTarget=void 0,this._toggleEventListeners(!0)}get name(){return a.offcanvasComponent}get defaults(){return q}toggle(){e._n(this.element,c.showClass)?this.hide():this.show()}show(){const{element:t,options:s,relatedTarget:n}=this;let i=0;if(e._n(t,c.showClass)||(v.relatedTarget=n||void 0,T.relatedTarget=n||void 0,e.Z(t,v),v.defaultPrevented))return;const l=a.getCurrentOpen(t);if(l&&l!==t){const g=f(l)||e.to(l,a.modalComponent);g&&g.hide()}s.backdrop?(r.hasPopup(a.overlay)?a.toggleOverlayType():a.appendOverlay(t,!0),i=e.ue(a.overlay),a.showOverlay(),setTimeout(()=>b(this),i)):(b(this),l&&e._n(a.overlay,c.showClass)&&a.hideOverlay())}hide(){const{element:t,relatedTarget:s}=this;e._n(t,c.showClass)&&(u.relatedTarget=s||void 0,w.relatedTarget=s||void 0,e.Z(t,u),!u.defaultPrevented&&(e.Gn(t,d),e.Zn(t,c.showClass),H(this)))}_toggleEventListeners=t=>{const s=t?e.E:e.r;this.triggers.forEach(n=>{s(n,e.vt,B)})};dispose(){const{element:t}=this,s=e._n(t,c.showClass),n=()=>setTimeout(()=>super.dispose(),1);this.hide(),this._toggleEventListeners(),s?e.so(t,n):n()}}module.exports=S;
//# sourceMappingURL=offcanvas.cjs.map
