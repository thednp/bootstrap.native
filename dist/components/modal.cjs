"use strict";const e=require("./base-component-_c7CmBvl.js"),O=require("./dataBsToggle-Dj-Ng54N.js"),$=require("./dataBsDismiss-CMHF7If_.js"),k=require("./fadeClass-Co6nOzNJ.js"),d=require("./showClass-D_Ms1FgG.js"),l=require("./popupContainer-Dxpyo8Ll.js"),a=require("./isVisible-BBb0IrW-.js"),E=require("./getTargetElement-BZ3GCU7c.js"),q=require("./isDisabled-BI_fUUV9.js"),F=`.${l.modalString}`,Z=`[${O.dataBsToggle}="${l.modalString}"]`,B=`[${$.dataBsDismiss}="${l.modalString}"]`,D=`${l.modalString}-static`,P={backdrop:!0,keyboard:!0},m=o=>e.to(o,a.modalComponent),x=o=>new M(o),f=e.mo(`show.bs.${l.modalString}`),b=e.mo(`shown.bs.${l.modalString}`),p=e.mo(`hide.bs.${l.modalString}`),S=e.mo(`hidden.bs.${l.modalString}`),_=o=>{const{element:t}=o,s=a.measureScrollbar(t),{clientHeight:n,scrollHeight:i}=e.w(t),{clientHeight:c,scrollHeight:g}=t,r=c!==g;if(!r&&s){const u={[e.Ho(t)?"paddingLeft":"paddingRight"]:`${s}px`};e.Eo(t,u)}a.setScrollbar(t,r||n!==i)},H=(o,t)=>{const s=t?e.E:e.r,{element:n}=o;s(n,e.vt,L),s(e.d(n),e.ft,I),t?o._observer.observe(n):o._observer.disconnect()},T=o=>{const{triggers:t,element:s,relatedTarget:n}=o;a.removeOverlay(s),e.Eo(s,{paddingRight:"",display:""}),H(o);const i=f.relatedTarget||t.find(a.isVisible);i&&e.ao(i),S.relatedTarget=n||void 0,e.Z(s,S),e.Ao(s)},w=o=>{const{element:t,relatedTarget:s}=o;e.ao(t),H(o,!0),b.relatedTarget=s||void 0,e.Z(t,b),e.Ao(t)},C=o=>{const{element:t,hasFade:s}=o;e.Eo(t,{display:"block"}),_(o),a.getCurrentOpen(t)||e.Eo(e.So(t),{overflow:"hidden"}),e.Gn(t,d.showClass),e.Kn(t,e.X),e.Qn(t,e.Pe,"true"),s?e.so(t,()=>w(o)):w(o)},y=o=>{const{element:t,options:s,hasFade:n}=o;s.backdrop&&n&&e._n(a.overlay,d.showClass)&&!a.getCurrentOpen(t)?(a.hideOverlay(),e.so(a.overlay,()=>T(o))):T(o)};function A(o){const t=E.getTargetElement(this),s=t&&m(t);q.isDisabled(this)||s&&(this.tagName==="A"&&o.preventDefault(),s.relatedTarget=this,s.toggle())}const I=({code:o,target:t})=>{const s=e.Wo(a.modalActiveSelector,e.d(t)),n=s&&m(s);if(!n)return;const{options:i}=n;i.keyboard&&o===e.gn&&e._n(s,d.showClass)&&(n.relatedTarget=null,n.hide())},L=o=>{const{currentTarget:t}=o,s=t&&m(t);if(!s||!t||e.ho.get(t))return;const{options:n,isStatic:i,modalDialog:c}=s,{backdrop:g}=n,{target:r}=o,h=e.d(t)?.getSelection()?.toString().length,u=c.contains(r),v=r&&e.Ne(r,B);i&&!u?e.ho.set(t,()=>{e.Gn(t,D),e.so(c,()=>K(s))},17):(v||!h&&!i&&!u&&g)&&(s.relatedTarget=v||null,s.hide(),o.preventDefault())},K=o=>{const{element:t,modalDialog:s}=o,n=(e.ue(s)||0)+17;e.Zn(t,D),e.ho.set(t,()=>e.ho.clear(t),n)};class M extends e.BaseComponent{static selector=F;static init=x;static getInstance=m;constructor(t,s){super(t,s);const{element:n}=this,i=e.Wo(`.${l.modalString}-dialog`,n);i&&(this.modalDialog=i,this.triggers=[...e.de(Z,e.d(n))].filter(c=>E.getTargetElement(c)===n),this.isStatic=this.options.backdrop==="static",this.hasFade=e._n(n,k.fadeClass),this.relatedTarget=null,this._observer=new ResizeObserver(()=>this.update()),this._toggleEventListeners(!0))}get name(){return a.modalComponent}get defaults(){return P}toggle(){e._n(this.element,d.showClass)?this.hide():this.show()}show(){const{element:t,options:s,hasFade:n,relatedTarget:i}=this,{backdrop:c}=s;let g=0;if(e._n(t,d.showClass)||(f.relatedTarget=i||void 0,e.Z(t,f),f.defaultPrevented))return;const r=a.getCurrentOpen(t);if(r&&r!==t){const h=m(r)||e.to(r,a.offcanvasComponent);h&&h.hide()}c?(l.hasPopup(a.overlay)?a.toggleOverlayType(!0):a.appendOverlay(t,n,!0),g=e.ue(a.overlay),a.showOverlay(),setTimeout(()=>C(this),g)):(C(this),r&&e._n(a.overlay,d.showClass)&&a.hideOverlay())}hide(){const{element:t,hasFade:s,relatedTarget:n}=this;e._n(t,d.showClass)&&(p.relatedTarget=n||void 0,e.Z(t,p),!p.defaultPrevented&&(e.Zn(t,d.showClass),e.Qn(t,e.X,"true"),e.Kn(t,e.Pe),s?e.so(t,()=>y(this)):y(this)))}update=()=>{e._n(this.element,d.showClass)&&_(this)};_toggleEventListeners=t=>{const s=t?e.E:e.r,{triggers:n}=this;n.length&&n.forEach(i=>{s(i,e.vt,A)})};dispose(){const t={...this},{modalDialog:s,hasFade:n}=t,i=()=>setTimeout(()=>super.dispose(),17);this.hide(),this._toggleEventListeners(),n?e.so(s,i):i()}}module.exports=M;
//# sourceMappingURL=modal.cjs.map
